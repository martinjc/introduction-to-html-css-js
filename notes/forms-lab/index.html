<!doctype html>
<html lang="en">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Practical Exercise: The JavaScript Debugger</title>

    <meta name="description" content="">

    <link rel="apple-touch-icon" sizes="180x180" href="/introduction-to-html-css-js/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/introduction-to-html-css-js/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/introduction-to-html-css-js/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/introduction-to-html-css-js/site.webmanifest">
    <meta name="theme-color" content="#d3374a">

    <meta property="og:url" content="">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Practical Exercise: The JavaScript Debugger">
    <meta property="og:site_name" content="Introduction to Programming">
    <meta property="og:locale" content="en_GB">
    <meta property="article:author" content="Martin Chorley">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@martinjc">
    <meta name="twitter:url" content="">
    <meta name="twitter:title" content="Practical Exercise: The JavaScript Debugger">

    <link rel="icon" href="/introduction-to-html-css-js/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Scope+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/introduction-to-html-css-js/css/main.css">
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.20.0/themes/prism.css">
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>
  <body>
    <header>
</header>
    <header>
    <h1> <a href="">
            Practical Exercise: The JavaScript Debugger
        </a></h1>
</header>

<div class="container">
    <nav class="sidebar">
        <a href='/introduction-to-html-css-js/'>Home</a>
        <ul><li><a href="/introduction-to-html-css-js/notes/dom/">Including JS in HTML</a></li><li><a href="/introduction-to-html-css-js/notes/events/">Events</a></li><li><a href="/introduction-to-html-css-js/notes/forms/">Forms</a></li><li><a href="/introduction-to-html-css-js/notes/forms-lab/">Practical Exercise: The JavaScript Debugger</a></li></ul>
        <a href="/introduction-to-html-css-js/about/">About</a>
    </nav>

    <div class="content">
        <p>We are now going to start to look at dynamically updating our pages using JavaScript, reacting to JavaScript events, and capturing information from the User using Form elements. We will also learn how to use the built-in tools in our browser to monitor how our code executes, and how to debug problems.</p>
<p>You will need to use Google Chrome for the coding exercises in this week’s lab sheet.</p>
<h3>JavaScript Debugging</h3>
<p>Create an <code>index.html</code> file for this week in a text editor, and at the same time, open it in Google Chrome.</p>
<p>You will also need the <code>Developer Tools</code> window open in Chrome</p>
<p>In the text editor, enter the following code for your index.html page:</p>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JavaScript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>            <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"I will add two numbers. What is the first number?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"What is the second number?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> z <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><br>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"The answer is: "</span> <span class="token operator">+</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>Reload the page, and enter a number in the prompt box when requested. Pay attention to the answer in the alert box. Is it what you expected?</p>
<p>Lets use the debugger to see what’s going on and try to figure out why we are getting the wrong answer. In the Developer Tools window in Google Chrome, click on the ‘Sources’ tab. in the left-hand pane you can see all the files that make up your webpage - in this case ‘index.html’. This may already be selected, but if not select this file, and the source code will appear in the middle pane.</p>
<p><img src="img/browser-debugger.png" alt="Developer Tools and the Debugger"></p>
<p>In order to see what is going on, we need to set a ‘breakpoint’. A breakpoint allows us to pause our code at a particular point, or during a particular event. We can then have a look at the internal <strong>state</strong> of our program to see what is going on. This allows us to find and fix errors in our code. We’ll set a breakpoint on the first line of code, line 13. Click on the ‘13’ in the code shown in the Developer Tools, and it will be highlighted with a blue arrow:</p>
<p><img src="img/browser-debugger-breakpoint.png" alt="Setting a breakpoint"></p>
<p>We have now set a breakpoint - we have told our browser to pause our JavaScript code at this point so that we can examine it. Reload your page, and the browser will pause when it gets to this line of JavaScript:</p>
<p><img src="img/browser-debugger-breakpoint-paused.png" alt="Setting a breakpoint"></p>
<p>We can now control how our browser executes our code, and <strong>step through</strong> the code line by line, or function by function. The debugger has a set of buttons that allow us to do this:</p>
<p><img src="img/debugger-controls.png" alt="Setting a breakpoint"></p>
<ul>
<li><img src="img/play.png" alt="Setting a breakpoint"> The first blue ‘play’ icon () allows us to resume our code. Our code will continue to run, until we hit another breakpoint or reach the end of the script.</li>
<li><img src="img/functions.png" alt="Setting a breakpoint"> The next three buttons (the curved arrow, the down arrow and the up arrow ) allow us to step over, in to and out of functions. We’ll use these more as we start to look at functions in the coming weeks.</li>
<li><img src="img/step-line.png" alt="Setting a breakpoint"> The last button, the arrow pointing to the right, is the control to step through our code one line at a time. This is the button we need to use right now.</li>
</ul>
<p>Press the Step button once, and our first line of code will execute, and we’ll see our prompt:</p>
<p><img src="img/browser-prompt.png" alt="Setting a breakpoint"></p>
<p>Enter the number 45 in the prompt, press OK, and we’ll see the debugger updates our <em>state</em> and moves on to the next line of code:</p>
<p><img src="img/browser-post-prompt.png" alt="Setting a breakpoint"></p>
<p>You can see that Line 14 of the code is now highlighted as the next line to be executed. The debugging pane on the right hand side of the window has also updated. In the ‘Scope’ section, you can see that we now have a local variable named <code>x</code> with a value of <code>&quot;45&quot;</code>. Press the step button again, and we’ll run the next line of code. Again, a prompt will be shown. Enter 78 in this prompt, and click ‘OK’. Our debugger state will be updated again:</p>
<p><img src="img/post-two-prompts.png" alt="Setting a breakpoint"></p>
<p>Our ‘Scope’ section now has two local variables, <code>x</code> with a value of <code>&quot;45&quot;</code> and <code>y</code> with a value of <code>&quot;78&quot;</code>. Click the step button again. and our next line of code will be run, adding <code>x</code> and <code>y</code> together, and storing the result in the variable <code>z</code>:</p>
<p><img src="img/answer-string.png" alt="Setting a breakpoint"></p>
<p>The problem seems to be that our values are being stored as Strings. You can tell this by the fact that the values in the variables are wrapped in double quote (<code>&quot;</code>) characters. When we try to add them together on line 15, rather than JavaScript performing numerical addition (and so adding 45 and 78 to get 123) it performs <strong>string concatenation</strong> and glues the two strings together, giving the result <code>&quot;4578&quot;</code>.</p>
<p>We can test that this really is the problem by using the ‘Watch’ section of the debugging pane. This allows us to monitor variable values, but we can also enter JavaScript expressions here. Click the <code>+</code> in the Watch section to add a new Watch expression, and type <code>typeof z</code>. The debugger will report that the type of <code>z</code> is <code>string</code>, just as we suspected:</p>
<p><img src="img/watch-expression.png" alt="Setting a breakpoint"></p>
<p>We can fix this code easily, by telling JavaScript to treat the values returned from the prompt as numbers (or Integers) rather than Strings. Edit lines 13 and 14 of your code:</p>
<pre class="language-html"><code class="language-html">let x = parseInt(prompt("I will add two numbers. What is the first number?")); let y = parseInt(prompt("What is the<br>second number?"));</code></pre>
<p>The <code>parseInt</code> function takes a string as input and attempts to convert it to an integer. Reload your page and step through its operation again, and this time you will see that the variables are treated as numbers rather than strings, and that our page delivers us the answer we expect at the end:</p>
<p><img src="img/correct-answer.png" alt="Setting a breakpoint"></p>
<h3>Coding in JavaScript</h3>
<p>Now we can debug our JavaScript, let’s have a go at solving some problems. There are three challenges for this lab session, you should be able to complete the first relatively easily given the exercise above. The other two may take a little longer.</p>
<p>Complete each task in a separate file.</p>
<h4>Task 1 - Multiplication</h4>
<p>You should write a JavaScript program that asks the user for three numbers, (asking for a number three separate times), multiplies the numbers together, and then returns the answer to the user, either via the console or an alert.</p>
<h5>Task 1.5 - Extension</h5>
<p>Can you rewrite your solution to Task 1 to use form elements in an HTML page, rather than alerts and prompts?</p>
<h4>Task 2 - Manipulating the DOM (ToDo list application)</h4>
<p>Create a new <code>index.html</code> for this next task:</p>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JavaScript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>week7-part1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>You should also create a JavaScript file in the same directory named <code>week7-part1.js</code>. This file will contain the JavaScript code we are working on (to begin with), and as you can see, we have already linked to this file in <code>index.html</code>. The contents of <code>week7-part1.js</code> should be:</p>
<pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"it works!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Open the page in a web browser and check the developer tools, and hopefully you should see the output in the console:</p>
<p><img src="img/week6-begin.png" alt="External JS"></p>
<p>As we are working through this code, remember to use the debugger to check what is going on and to make sure you understand how the code is working.</p>
<h5>JavaScript Events</h5>
<p>Lets add some content to our page, and some styling. First, the body content:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Title of Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Contact<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>week7-part1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre>
<p>Now lets style the page. First we’ll apply a CSS reset by including a link to one in our <code>&lt;head&gt;</code> element:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JavaScript Week 6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/reset-css@4.0.1/reset.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre>
<p>Now let’s also add our own CSS file:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JavaScript Week 6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/reset-css@4.0.1/reset.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre>
<p>Lets create the file <code>style.css</code> and add some contents:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">{</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">header</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">header h1</span> <span class="token punctuation">{</span><br>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><br>    <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 60vw<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">nav</span> <span class="token punctuation">{</span><br>    <span class="token property">padding-right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><br>    <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 40vw<span class="token punctuation">;</span><br>    <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">nav > ul > li</span> <span class="token punctuation">{</span><br>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>That was quite a lot of code to get a basic layout so we can start to experiment with JavaScript events. It should create a page that looks a little something like this:</p>
<p><img src="img/week6-page.png" alt="Starting Page"></p>
<p>Lets add some event listeners to our page. We’ll start by listening to events on the <code>nav</code> element. In <code>week7-part1.js</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> nav_element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"nav"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>nav_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"nav clicked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Refresh the page and try clicking on your nav element - you should see output in the console. Try adding a breakpoint to your anonymous function so that whenever the <code>nav</code> element is clicked the code pauses and you can inspect the code and the variables that are in scope. It is always preferable to use the debugger to inspect code rather than littering our code with lots of output to the console.</p>
<p>Now let’s add another listener to each of the list items in the <code>&lt;ul&gt;</code> inside the nav:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> list_items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list_items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    list_items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"list item clicked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Now when you click on an item in the nav bar you should see two pieces of output - one when the click event is registered by the <code>li</code> and one when it is registered by the <code>nav</code>.</p>
<p><img src="img/week6-bubble.png" alt="Starting Page"></p>
<p>You can see from the order of the output in the console that the <code>li</code> element gets to deal with the event first, then the <code>nav</code> element.</p>
<p>How would we change the code so that the <code>nav</code> element is able to deal with the event first? Try it out.</p>
<p>If we want a parent element (or grand parent, or any kind of ancestor) to deal with events before the children of that element, we need to register the event listener with the <code>usecapture</code> parameter set to <code>true</code>. Events on that element will then be dealt with in the capture phase, rather than the bubbling phase, so before they reach the children of the element.</p>
<p>Can you modify the code so that it prints the number of the list item that has been clicked? Does it work as you expect?</p>
<p>If you’re not seeing the behaviour you expect, then most likely, you’ve modified the code like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list_items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    list_items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"list item "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" clicked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>But this keeps printing out “list item 3 clicked” to the console whenever you click a list item:</p>
<p><img src="img/week6-closure.png" alt="Starting Page"></p>
<p>This is because you have created a <code>closure</code> with your anonymous inner function. This function has access to all the variables that were in scope at the time of its creation. So, although we might expect <code>i</code> to only be in <em>scope</em> during the execution of the for loop, JavaScript actually makes it available to our anonymous inner function (our event listener) later on too.</p>
<p>Try using the debugger to add a breakpoint in your code near the loop. Run your code and step through the loop one iteration at a time - Look at the values of the variables in the debugger? can you see what is going on with the code? Add another breakpoint inside the event listener function and re-run the code. What happens to the value of the variables inside the event listener function when that code is run?</p>
<p>Essentially the value of <code>i</code> is not considered at ‘compile’ time (when the browser first reads the JavaScript code). Instead, the browser simply remembers that it needs to run your function when it registers a <code>click</code> event on the list item, and when it does, it needs to check what the value of <code>i</code> is so it can be printed out to the console. Of course, by the time a click has been registered on the list item, our for loop has already run, and so <code>i</code> has the value of 3. No matter which item you click, the value of <code>i</code> will not change in the code, and so <code>list item 3 clicked</code> is printed to the console.</p>
<p>There are two solutions to this problem. One is to wrap our eventListener code in another function which accepts the current version of <code>i</code> as input, and call it immediately:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list_items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        list_items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"list item "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" clicked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>The simpler solution is just to use the <code>let</code> keyword for our <code>for</code> loop counter variable. This will declare <code>i</code> as a variable that is only in scope within the for loop, removing the problem of the closure retaining access to the global <code>i</code> variable after the <code>for</code> loop has stopped iterating:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list_items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    list_items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"list item "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" clicked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Can you add a listener that will turn the title of the page purple when the mouse is above the <code>h1</code> element?</p>
<p> </p>
<h5>Form input</h5>
<p>Now lets add a textbox and an input button to our page, and a list that we’ll be adding some output to. The basic idea is that we want to be able to enter text in the text box and have it added to our list:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameTextField<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameTextField<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Okay!<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>okayButton<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<p>And lets add some JavaScript that listens for the user pressing the ‘Okay’ button, and prints the contents of the text box to the console:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> okay_button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"okayButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>okay_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> nameTextBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"nameTextField"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nameTextBox<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Lets also add a list that we can use to add some output too:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameTextField<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameTextField<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Okay!<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>okayButton<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outputList<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>Now we can get the contents of the text box when the user clicks “Okay”, lets add this input to our list, and clear the text box for the next value to be added:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> okay_button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"okayButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>okay_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> nameTextBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"nameTextField"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> textValue <span class="token operator">=</span> nameTextBox<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> outputList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outputList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> newListItem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> textContent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>textValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    newListItem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    outputList<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newListItem<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    nameTextBox<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h5>Task 2.5 - Going Further</h5>
<p>We’ve got the beginnings of a basic ‘to-do list’ application here, but it’s very rudimentary. See if you can improve the functionality.</p>
<ul>
<li>Can you add some basic error checking to the input to prevent empty items being added to the list?</li>
<li>Can you add the functionality to allow a user to remove an item from the list by clicking on it?</li>
<li>Can you sort the list alphabetically?</li>
</ul>
<h4>Task 3 - Guess the Number</h4>
<p>You should write a JavaScript program that allows a player to enter a number between 0 and 100 that the computer will then guess. The player should respond whether the guess is the same as the number (Yes), Higher or Lower. The game should loop and continue guessing and asking if the number is correct, until it gets it right.</p>
<p>A template to be used as a starting point for this task can be found in the <a href="https://gitlab.cs.cf.ac.uk/scm2mjc/cmt112-examples/blob/master/2-1/lab/guess.html">cmt112-examples repository</a>.</p>
<p>Try to break your program by giving the computer the wrong answer, or a nonsensical answer. Can you add more code to the program to make sure it can cope with these types of inputs? Use the debugger to see what is going wrong with the code when you supply the wrong answer or an answer that does not make sense.</p>
<p>The basic template above using alerts and prompts. Can you modify the code to use form elements and to update the page dynamically with results and output?</p>

        <div class="nextprev"><p class="previous">Previous: <a href="/introduction-to-html-css-js/notes/forms/">Forms</a></p>
        </div>
        <div class="comments">
            <script src="https://utteranc.es/client.js"
            repo="martinjc/introduction-to-html-css-js"
            issue-term="title"
            theme="github-light"
            crossorigin="anonymous"
            async>
            </script>
        </div>
        
    </div>
</div>

<script>
document.querySelectorAll('.answer-block').forEach(d => {
    d.addEventListener('click', (e) => {
        d.querySelector('.feedback').classList.toggle('hidden');
        d.classList.toggle('selected');
    });
});
</script>
    
  </body>
</html>